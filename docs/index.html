
<!DOCTYPE html>


<html lang="en" data-content_root="./" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Kо̄manawa-Easy-Nc-Accessor &#8212; komanawa-easy-nc-accessor v0.0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="_static/documentation_options.js?v=2fea6348"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'index';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="komanawa.easy_nc_accessor" href="autoapi/komanawa/easy_nc_accessor/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="#">
  
  
  
  
  
    
    
    
    <img src="_static/ksl_for_latex.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">Easy-Nc-Accessor v0.0.1 Overview</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="autoapi/komanawa/easy_nc_accessor/index.html">
    Code documentation
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="#https://github.com/Komanawa/komanawa-easy-nc-accessor#" title="View on GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">View on GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/k%C5%8Dmanawa-solutions-ltd/" title="Follow us on LinkedIn" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Follow us on LinkedIn</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.komanawa.com" title="Kо̄manawa Solutions Ltd." class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="_static/just_symbol.png" class="icon-link-image" alt="Kо̄manawa Solutions Ltd."/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="autoapi/komanawa/easy_nc_accessor/index.html">
    Code documentation
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="#https://github.com/Komanawa/komanawa-easy-nc-accessor#" title="View on GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">View on GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/k%C5%8Dmanawa-solutions-ltd/" title="Follow us on LinkedIn" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Follow us on LinkedIn</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.komanawa.com" title="Kо̄manawa Solutions Ltd." class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="_static/just_symbol.png" class="icon-link-image" alt="Kо̄manawa Solutions Ltd."/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none"></div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="kmanawa-light-name">
<h1>Kо̄manawa-Easy-Nc-Accessor<a class="headerlink" href="#kmanawa-light-name" title="Link to this heading">#</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Matt Dumont</p>
</dd>
<dt class="field-even">copyright<span class="colon">:</span></dt>
<dd class="field-even"><p>2025, Kо̄manawa Solutions Ltd.</p>
</dd>
<dt class="field-odd">Version<span class="colon">:</span></dt>
<dd class="field-odd"><p>v0.0.1</p>
</dd>
<dt class="field-even">Date<span class="colon">:</span></dt>
<dd class="field-even"><p>Apr 15, 2025</p>
</dd>
</dl>
<div class="toctree-wrapper compound">
</div>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>This package is designed to make it easier to access and manipulate NetCDF4 datasets provided by Kо̄manawa Solutions Ltd. within geospatial contexts.  The datasets must be in a specific format to use this package, but if you need to work with some third party data… the code within this package is open source and you are welcome to use it as a reference or to modify it to suit your needs, just note that if you use this package, you are bound by the terms of the GNU Lesser General Public License v3.0 (LGPL-3.0) license –&gt; Essentially you may use this package, but if you <strong>modify and redistribute</strong> it, you must make the redistributed package open source and provide it under the same license.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h2>
<section id="python-environment">
<h3>Python environment<a class="headerlink" href="#python-environment" title="Link to this heading">#</a></h3>
<p>This package uses GDAL, which can be a real pain to manage appropriately without conda.
Therefore, we recommend using a conda environment for this package as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Conda<span class="w"> </span>create<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>--name<span class="w"> </span>myenv<span class="w"> </span>python<span class="w"> </span><span class="nv">numpy</span><span class="o">=</span><span class="m">1</span>.26<span class="w"> </span>pandas<span class="w"> </span>matplotlib<span class="w"> </span>netcdf4<span class="w"> </span>pyproj<span class="w"> </span>geopandas<span class="w"> </span>gdal

conda<span class="w"> </span>activate<span class="w"> </span>myenv
</pre></div>
</div>
</section>
<section id="install-the-package-using-pip">
<h3>Install the package using pip:<a class="headerlink" href="#install-the-package-using-pip" title="Link to this heading">#</a></h3>
<p>The easiest way to install the package is to use pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/Komanawa/komanawa-easy-nc-accessor.git
</pre></div>
</div>
<p>For a specific version of the package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/Komanawa/komanawa-easy-nc-accessor.git@<span class="o">{</span>version<span class="o">}</span>

<span class="c1"># example:</span>
pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/Komanawa/komanawa-easy-nc-accessor.git@v0.0.1
</pre></div>
</div>
<p>Bleeding edge version:</p>
<div class="highlight-base notranslate"><div class="highlight"><pre><span></span>pip install git+https://github.com/Komanawa/komanawa-easy-nc-accessor.git@development
</pre></div>
</div>
</section>
</section>
<section id="dataset-types">
<h2>Dataset Types<a class="headerlink" href="#dataset-types" title="Link to this heading">#</a></h2>
<p>This package is designed to work with specific types of datasets provided by Kо̄manawa Solutions Ltd.</p>
<section id="compressed-spatial-datasets">
<h3>Compressed Spatial datasets<a class="headerlink" href="#compressed-spatial-datasets" title="Link to this heading">#</a></h3>
<p>This dataset type is a NetCDF4 dataset with the spatial dimensions compressed into a single dimension.
This is done as a way to reduce the working memory size of the data where large portions of the N-S / E-W oriented regular grid are not used.</p>
<p>This dataset is typically noted as having a “space” dimension rather than a “x” and “y” dimension.
Note the dataset will contain the following useful variables:</p>
<ul class="simple">
<li><p><cite>grid_x</cite>: a 1d array that contains the x coordinates of the spatial indexes on a regular N-S, E-W grid (dimension = “grid_x”).</p></li>
<li><p><cite>grid_y</cite>: a 1d array that contains the y coordinates of the spatial indexes on a regular N-S, E-W grid (dimension = “grid_y”).</p></li>
<li><p><cite>x</cite>: a 1d array that contains the x coordinates of the data on the compressed grid (dimension = “space”).</p></li>
<li><p><cite>y</cite>: a 1d array that contains the y coordinates of the data on the compressed grid (dimension = “space”).</p></li>
<li><p><cite>active_index</cite>: a 2d boolean array that indicates which spatial indexes are active (True) and which are not (False), (dimension = (“grid_x”, “grid_y”)).</p></li>
</ul>
</section>
</section>
<section id="usage-overview">
<h2>Usage Overview<a class="headerlink" href="#usage-overview" title="Link to this heading">#</a></h2>
<section id="brush-up-on-numpy-indexing-slicing-and-along-axis-operations">
<h3>Brush up on Numpy indexing, slicing and along axis operations<a class="headerlink" href="#brush-up-on-numpy-indexing-slicing-and-along-axis-operations" title="Link to this heading">#</a></h3>
<p>It is beyond the scope of this documentation to fully cover the use of Numpy, but understanding indexing, slicing and array operations are essential to use multidimensional data in Python.</p>
<p>If you need a refresher, I personally recommend <a class="reference external" href="https://python-course.eu/numerical-programming/introduction-to-numpy.php">https://python-course.eu/numerical-programming/introduction-to-numpy.php</a></p>
<p>Very basically Numpy arrays are n-dimensional arrays.
It is often easiest to think of the dimensions by their meaning rather than trying to visualise the array.
Visualisation makes sense with 1, 2, or 3 dimensions, but beyond that it can break your brain.</p>
<p>For example consider an array with shape (100, 10, 5, 5) (axis=0, axis=1, axis=2, axis=3) which corresponds to (time, site, depth, realisation).
This is really difficult to visualise, but if you think of it as a 4D array with 100 time steps, 10 sites, 5 depths and 5 realisations, it is much easier to understand.</p>
<p>Numpy indexing is zero based, so the first element of an array is at index 0.
So if we want the first time step, 3rd site, 2nd depth and 4th realisation, we would use the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># create a random array with shape (100, 10, 5, 5)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># for reproducibility</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># get the first time step, 3rd site, 2nd depth and 4th realisation</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># should get 0.466</span>
</pre></div>
</div>
<p>Slicing is a way to get a number of elements from an array, so for example if we want the first 5  time steps, 3rd site, 2nd depth and all realisations, we would use the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># create a random array with shape (100, 10, 5, 5)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># for reproducibility</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># get all time steps, 3rd site, 2nd depth and all realisations</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># should get (5, 5)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># should get a 5x5 array</span>
<span class="c1"># [[0.161 0.653 0.253 0.466 0.244]</span>
<span class="c1">#  [0.232 0.132 0.053 0.726 0.011]</span>
<span class="c1">#  [0.091 0.228 0.41  0.623 0.887]</span>
<span class="c1">#  [0.709 0.954 0.352 0.898 0.77 ]</span>
<span class="c1">#  [0.233 0.311 0.791 0.715 0.558]]</span>
</pre></div>
</div>
<p>Axis operations are a way to perform operations along a specific axis of an array.
For example if we want to get the mean of all time steps, 3rd site, 2nd depth and all realisations, we would use the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># create a random array with shape (100, 10, 5, 5)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># for reproducibility</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># get the mean of all time steps, 3rd site, 2nd depth and all realisations</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># should get (5,)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># should get a 1D array with the mean of each realisation</span>
<span class="c1"># [0.47146 0.52169 0.46669 0.49182 0.52673]</span>
</pre></div>
</div>
</section>
<section id="accessing-data-via-the-netcdf4-python-package">
<h3>Accessing data via the NetCDF4 python package<a class="headerlink" href="#accessing-data-via-the-netcdf4-python-package" title="Link to this heading">#</a></h3>
<p>A full explanation of the NetCDF4 package is beyond the scope of this documentation, but a good starting point is the official documentation at: <a class="reference external" href="https://unidata.github.io/netcdf4-python/">https://unidata.github.io/netcdf4-python/</a></p>
<p>Basically, the NetCDF4 package stores self documenting N-dimensional data in a binary format.</p>
<p>The dataset has Dimensions, Variables, and attributes that describe the data, such as the units, long name, and other metadata (for both the full dataset and each variable).</p>
<p>As an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">netCDF4</span> <span class="k">as</span> <span class="nn">nc</span>

<span class="c1"># open the dataset</span>
<span class="k">with</span> <span class="n">nc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s1">&#39;path/to/dataset.nc&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dataset</span><span class="p">:</span>

    <span class="c1"># print the dataset information</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

    <span class="c1"># root group (NETCDF4 data model, file format HDF5):</span>
    <span class="c1"># xmin: 1306918.0</span>
    <span class="c1"># xmax: 1356918.0</span>
    <span class="c1"># ymin: 4998423.0</span>
    <span class="c1"># ymax: 5048423.0</span>
    <span class="c1"># description: dummy dataset for testing</span>
    <span class="c1"># tile_number: 559</span>
    <span class="c1"># start_date: 2000-07-01</span>
    <span class="c1"># end_date: 2003-06-30</span>
    <span class="c1"># ndays_amalg: 7</span>
    <span class="c1"># dimensions(sizes): grid_x(50), grid_y(50), time(156), space(1331), variance(3)</span>
    <span class="c1"># variables(dimensions): float64 grid_x(grid_x), float64 grid_y(grid_y), int64 active_index(grid_y, grid_x), int16 time(time), int64 variance(variance), float64 x(space), float64 y(space), int16 rainfall(time, space, variance)</span>
    <span class="c1"># ...</span>

    <span class="c1"># print the dimensions of the dataset</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">dimensions</span><span class="p">)</span>
    <span class="c1"># {&#39;grid_x&#39;: &quot;&lt;class &#39;netCDF4.Dimension&#39;&gt;&quot;: name = &#39;grid_x&#39;, size = 50,</span>
    <span class="c1">#  &#39;grid_y&#39;: &quot;&lt;class &#39;netCDF4.Dimension&#39;&gt;&quot;: name = &#39;grid_y&#39;, size = 50,</span>
    <span class="c1">#  &#39;time&#39;: &quot;&lt;class &#39;netCDF4.Dimension&#39;&gt;&quot;: name = &#39;time&#39;, size = 156,</span>
    <span class="c1">#  &#39;space&#39;: &quot;&lt;class &#39;netCDF4.Dimension&#39;&gt;&quot;: name = &#39;space&#39;, size = 1331,</span>
    <span class="c1">#  &#39;variance&#39;: &quot;&lt;class &#39;netCDF4.Dimension&#39;&gt;&quot;: name = &#39;variance&#39;, size = 3}</span>



    <span class="c1"># print the variables of the dataset</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
     <span class="c1"># {&#39;grid_x&#39;: &lt;class &#39;netCDF4.Variable&#39;&gt;</span>
     <span class="c1"># float64 grid_x(grid_x)</span>
     <span class="c1">#     longname: grid x coordinates</span>
     <span class="c1">#     units: m</span>
     <span class="c1">#     epsg: 2193</span>
     <span class="c1"># unlimited dimensions:</span>
     <span class="c1"># current shape = (50,)</span>
     <span class="c1"># filling on, default _FillValue of 9.969209968386869e+36 used, &#39;grid_y&#39;: &lt;class &#39;netCDF4.Variable&#39;&gt;</span>
     <span class="c1"># float64 grid_y(grid_y)</span>
     <span class="c1">#     longname: grid y coordinates</span>
     <span class="c1">#     units: m</span>
     <span class="c1">#     epsg: 2193</span>
     <span class="c1"># unlimited dimensions:</span>
     <span class="c1"># current shape = (50,)</span>
     <span class="c1"># filling on, default _FillValue of 9.969209968386869e+36 used, &#39;active_index&#39;: &lt;class &#39;netCDF4.Variable&#39;&gt;</span>
     <span class="c1"># int64 active_index(grid_y, grid_x)</span>
     <span class="c1">#     longname: active index</span>
     <span class="c1">#     units: boolean</span>
     <span class="c1">#     description: 1 = active, 0 = inactive, for easy boolean indexing of the model to a regular grid</span>
     <span class="c1"># unlimited dimensions:</span>
     <span class="c1"># current shape = (50, 50)</span>
     <span class="c1"># filling on, default _FillValue of -9223372036854775806 used, &#39;time&#39;: &lt;class &#39;netCDF4.Variable&#39;&gt;</span>
     <span class="c1"># int16 time(time)</span>
     <span class="c1">#     _FillValue: -1</span>
     <span class="c1">#     long_name: time</span>
     <span class="c1">#     units: days since 1970-01-01 00:00:00</span>
     <span class="c1">#     calendar: standard</span>
     <span class="c1">#     description: amalgamation time step starts on reported day.  e.g. if the reported day is 1 Jan and 7 day amalgamation, then the time step is the mean of 1-Jan to 7-Jan inclusive</span>
     <span class="c1"># unlimited dimensions:</span>
     <span class="c1"># current shape = (156,)</span>
     <span class="c1"># filling on, &#39;variance&#39;: &lt;class &#39;netCDF4.Variable&#39;&gt;</span>
     <span class="c1"># int64 variance(variance)</span>
     <span class="c1">#     long_name: variance</span>
     <span class="c1">#     units: dimensionless</span>
     <span class="c1">#     description: -1 = low, 0 = average, 1 = high</span>
     <span class="c1"># unlimited dimensions:</span>
     <span class="c1"># current shape = (3,)</span>
     <span class="c1"># filling on, default _FillValue of -9223372036854775806 used, &#39;x&#39;: &lt;class &#39;netCDF4.Variable&#39;&gt;</span>
     <span class="c1"># float64 x(space)</span>
     <span class="c1">#     _FillValue: nan</span>
     <span class="c1">#     long_name: x coordinate</span>
     <span class="c1">#     units: meters</span>
     <span class="c1">#     standard_name: projection_x_coordinate</span>
     <span class="c1">#     epsg: 2193</span>
     <span class="c1"># unlimited dimensions:</span>
     <span class="c1"># current shape = (1331,)</span>
     <span class="c1"># filling on, &#39;y&#39;: &lt;class &#39;netCDF4.Variable&#39;&gt;</span>
     <span class="c1"># float64 y(space)</span>
     <span class="c1">#     _FillValue: nan</span>
     <span class="c1">#     long_name: y coordinate</span>
     <span class="c1">#     units: meters</span>
     <span class="c1">#     standard_name: projection_y_coordinate</span>
     <span class="c1">#     epsg: 2193</span>
     <span class="c1"># unlimited dimensions:</span>
     <span class="c1"># current shape = (1331,)</span>
     <span class="c1"># filling on, &#39;rainfall&#39;: &lt;class &#39;netCDF4.Variable&#39;&gt;</span>
     <span class="c1"># int16 rainfall(time, space, variance)</span>
     <span class="c1">#     _FillValue: -1</span>
     <span class="c1">#     long_name: rainfall</span>
     <span class="c1">#     units: mm</span>
     <span class="c1">#     scale_factor: 0.1</span>
     <span class="c1">#     add_offset: 0</span>
     <span class="c1">#     description: rainfall for the given time step and variance</span>
     <span class="c1"># unlimited dimensions:</span>
     <span class="c1"># current shape = (156, 1331, 3)</span>
     <span class="c1"># filling on}</span>
</pre></div>
</div>
<p>You can think of the NetCDF4 dataset as a fancy Numpy array with a lot of extra information.
You can get the dataset just like you would for a Numpy array.</p>
<p>For example read all rainfall data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">netCDF4</span> <span class="k">as</span> <span class="nn">nc</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># open the dataset</span>
<span class="k">with</span> <span class="n">nc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s1">&#39;path/to/dataset.nc&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="n">rainfall</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;rainfall&#39;</span><span class="p">][:])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">rainfall</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># should get (156, 1331, 3)</span>
</pre></div>
</div>
<p>Example, read all the rainfall for the first 7 weeks:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">netCDF4</span> <span class="k">as</span> <span class="nn">nc</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># open the dataset</span>
<span class="k">with</span> <span class="n">nc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s1">&#39;path/to/dataset.nc&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="n">rainfall</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;rainfall&#39;</span><span class="p">][:</span><span class="mi">7</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">rainfall</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># should get (7, 1331, 3)</span>
</pre></div>
</div>
<p>Example, read all the rainfall data for the first 7 weeks, all spatial locations and the middle variance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">netCDF4</span> <span class="k">as</span> <span class="nn">nc</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># open the dataset</span>
<span class="k">with</span> <span class="n">nc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="s1">&#39;path/to/dataset.nc&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="n">rainfall</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;rainfall&#39;</span><span class="p">][:</span><span class="mi">7</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">rainfall</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># should get (7, 1331)</span>
</pre></div>
</div>
</section>
<section id="using-this-package">
<h3>Using this package<a class="headerlink" href="#using-this-package" title="Link to this heading">#</a></h3>
<p>Given the utility of Numpy and NetCDF4, you might reasonably wonder why this package exists.
It is to make it easier to access and manipulate, and interrogate the data with geospatial contexts.</p>
<p>For example this package makes it easy to:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Take a NetCDF4 dataset that you have loaded and transformed into just the spatial dimension and then</dt><dd><ol class="arabic simple">
<li><p>export it as a GeoTIFF.</p></li>
<li><p>plot a heat map of the data.</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>Find the nearest spatial indexes to a give point.</p></li>
<li><p>Create a boolean spatial index for all data that intersects a given polygon.</p></li>
<li><p>Find the correct files for a tiled dataset from a bounding box.</p></li>
</ol>
<p>Rather than try to explain all the features of this package, we have provided a number of examples below and have generated documentation for the code itself.</p>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h2>
<p>We have provided a number of examples to show how to use the package.
If you want to run these examples locally you will need to <strong>clone the repository (not pip install)</strong> and then run the examples from the <cite>examples</cite> directory.</p>
<p>The examples include:</p>
<ol class="arabic simple">
<li><p>get_relevant_tiles.py: Set up and get the relevant tiles for a given bounding box.</p></li>
<li><p>mean_uncert_at_point.py: This example shows how to get the mean and uncertainty of a dataset at a point, and plot the time series.</p></li>
<li><p>data_in_polygon.py: This example shows how to export the time series sum of all rainfall within a polygon as a CSV file.</p></li>
<li><p>plot_export_spatial_mean.py: This example shows hot ot plot the spatial mean of a dataset and export it as a GeoTIFF.</p></li>
<li><p>annual_mean_at_point_polygon.py: This example shows how to get the annual mean of a datasets at a point, the total annual mean of the dataset within a polygon, and how to plot and export the results as a GeoTIFF.</p></li>
</ol>
<section id="example-dataset">
<h3>Example dataset<a class="headerlink" href="#example-dataset" title="Link to this heading">#</a></h3>
<p>We have provided a dummy example dataset in the <cite>examples</cite> directory:  examples/dummy_dataset</p>
<p>This example dataset is a NetCDF4 dataset with the spatial dimensions compressed into a single dimension for the the Central Otago region of New Zealand.  It comprises 4 spatial tiles which each have modified ERA5-land Total precipitation
data for 2000-07-01 to 2003-06-30.
The data is reported as 7 day mean precipitation in mm/day,  Note that each year is assumed to be 364 days (52 weeks).
Therefore the additional 1-2 days as simply excluded. The missing days are 2003-06-30 for non-leap years and  2003-06-29 and 2003-06-30.</p>
<p>The data also contains a dummy uncertainty dimension: 3 realisations that provide the uncertainty of the data</p>
<p>Please note that this data is roughly based on ERA5-Land Precipitation data, but should not be used for any real analysis.</p>
</section>
</section>
<section id="bugs-issues-and-feature-requests">
<h2>Bugs, issues and feature requests<a class="headerlink" href="#bugs-issues-and-feature-requests" title="Link to this heading">#</a></h2>
<p>We are trying to strike the right balance between making this package easy to use and still flexible enough to be useful. If you have and issues, bugs or feature requests, please let us know by creating an issue on the GitHub repository and/or contacting us directly.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="right-next"
       href="autoapi/komanawa/easy_nc_accessor/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">komanawa.easy_nc_accessor</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-environment">Python environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-package-using-pip">Install the package using pip:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-types">Dataset Types</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#compressed-spatial-datasets">Compressed Spatial datasets</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage-overview">Usage Overview</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#brush-up-on-numpy-indexing-slicing-and-along-axis-operations">Brush up on Numpy indexing, slicing and along axis operations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-data-via-the-netcdf4-python-package">Accessing data via the NetCDF4 python package</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-this-package">Using this package</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-dataset">Example dataset</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bugs-issues-and-feature-requests">Bugs, issues and feature requests</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Kо̄manawa Solutions Ltd..
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>